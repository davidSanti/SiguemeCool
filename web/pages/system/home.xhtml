<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../../resources/templates/plantilla.xhtml">

            <ui:define name="content">
                <h4>
                    <h2><h:outputText value="!Hola #{menuController.retornarNombreUsuario()}!"/></h2>

                </h4>
                <center>
                    <h2><h:outputText value="Bienvenid@ al sistema de información Sigueme." style="color: #0284A8"/></h2> 
                </center>
                <h:form>
                    <p:galleria value="#{menuController.images}" var="image" panelWidth="900" panelHeight="700" showCaption="true"
                                style="left:25%!important;margin-top: 1%!important">
                        <p:graphicImage value="../../resources/img/galeria/#{image}"  title="#{image}" 
                                        height="500"/>
                    </p:galleria>
                </h:form>


                <p:dialog id="cambiarClave" widgetVar="cambiarClave" resizable="false" width="380"
                          modal="true" closeOnEscape="false" showEffect="fade" hideEffect="fade" closable="false">

                    <h2>Cambiar Contraseña</h2>
                    <center>
                        <h:form id="formCambiarClave">
                            <p:growl id="growlCambiar" showDetail="true" showSummary="false" sticky="false" life="5000"/> 

                            <h:panelGrid id="gridCambiarClave" columns="1" width="280">


                                <p:password id="clave" required="true" requiredMessage="Debes escribir la clave para guardar los cambios"
                                            value="#{menuController.claveActual}" maxlength="16"
                                            validatorMessage="La clave debe tener entre 8 y 16 carácteres" 
                                            pt:placeholder="Contraseña actual" >
                                    <f:validateLength minimum="8" maximum="16" />
                                </p:password>


                                <p:password id="password" required="true" 
                                            requiredMessage="La clave es un campo obligatorio"
                                            weakLabel="Débil" 
                                            strongLabel="Fuerte" 
                                            goodLabel="Bien"
                                            feedback="true" promptLabel="Escriba su contraseña"
                                            value="#{menuController.nuevaClave}" maxlength="16" match="password1" 
                                            validatorMessage="Las contraseñas no coinciden" pt:placeholder="Nueva Contraseña" >
                                    <f:validateLength minimum="8" maximum="16" />
                                </p:password>


                                <p:password id="password1" required="true" requiredMessage="debes confirmar la clave"
                                            weakLabel="Débil" 
                                            strongLabel="Fuerte" 
                                            goodLabel="Bien"
                                            feedback="true" promptLabel="Escriba su contraseña"
                                            maxlength="16" pt:placeholder="Confirmar contraseña">
                                    <f:validateLength minimum="8" maximum="16" />
                                </p:password>

                                <p:commandButton value="Continuar" action="#{menuController.cambiarClaveUsuario()}" 
                                                 update="formCambiarClave:growlCambiar" styleClass="btn btn-primary"/>
                            </h:panelGrid>
                        </h:form>
                    </center>
                </p:dialog>
            </ui:define>

        </ui:composition>

    </body>
</html>
